# NetReptile --list 参数使用示例

## 新增功能
NetReptile 现在支持 `--list` 参数，允许从文件批量处理多个URL。

## 基本用法

### 1. 单URL模式（原有功能）
```bash
python netreptile.py https://example.com output.html
python netreptile.py https://news.example.com news.txt --selector ".article-content"
```

### 2. 多URL列表模式（新增功能）
```bash
# 基本用法
python netreptile.py --list urls.txt output.txt

# 使用配置文件和超时设置
python netreptile.py --list urls.txt output.txt --config config.json --timeout 60000

# 使用选择器提取特定内容
python netreptile.py --list urls.txt output.txt --selector ".article" --selector-type css
```

## URL列表文件格式

URL列表文件是一个文本文件，每行一个URL或HTML链接标签。支持以下格式：

```
# 这是一个URL列表文件示例
# 空行和以#开头的行会被忽略

# 直接URL
https://example.com/page1
https://example.com/page2

# HTML <a href>标签（程序会自动提取href属性值）
<a href="/page3">Page 3</a>
<a href="https://www.github.com">GitHub</a>
<a href='page4.html'>Page 4</a>

# 相对URL（当配置文件中定义了baseurl时，会自动拼接）
/page5
article.html

# 注释可以放在任何位置
https://example.com/page6
```

## 输出格式

当使用 `--list` 参数时，输出文件将包含所有URL的内容，按顺序排列，每个URL之间有清晰的分隔符：

```
================================================================================
URL 1: https://example.com/page1
================================================================================
[页面1的内容]

================================================================================
URL 2: https://example.com/page2
================================================================================
[页面2的内容]

================================================================================
URL 3: https://example.com/page3
================================================================================
[页面3的内容]
```

## 注意事项

1. 当指定 `--list` 参数时，命令行中的URL参数会被忽略
2. 如果既没有提供URL也没有提供 `--list` 参数，程序会显示错误信息
3. 如果URL列表文件为空或只包含注释/空行，程序会显示错误信息
4. 所有其他参数（--config, --timeout, --selector, --selector-type, --verbose）在两种模式下都适用

## 新增功能：baseurl支持

当配置文件中定义了`baseurl`字段时，程序会对所有处理的URL进行自动拼接：

1. 如果URL已经是绝对URL（以http://、https://或//开头），则不会添加baseurl
2. 如果URL是相对URL，会自动在前面加上baseurl
3. 如果baseurl以斜杠结尾，而相对URL也以斜杠开头，会自动移除重复的斜杠

## 示例配置文件

`6park.json` 示例（包含baseurl）：
```json
{
    "timeout": 50000,
    "selector": "//div[@class='content-section']",
    "selector_type": "xpath",
    "baseurl": "https://www.example.com/"
}
```

`sina.json` 示例（包含baseurl）：
```json
{
    "timeout": 30000,
    "selector": ".article-content",
    "selector_type": "css",
    "baseurl": "https://news.sina.com.cn/"
}
```

`sina.json` 示例（不包含baseurl）：
```json
{
    "timeout": 30000,
    "selector": ".article-content",
    "selector_type": "css"
}
```

## 实际使用示例

### 示例1：基本使用
1. 创建URL列表文件 `my_urls.txt`：
```
https://news.sina.com.cn/china/
https://news.sina.com.cn/world/
https://news.sina.com.cn/tech/
```

2. 运行命令：
```bash
python netreptile.py --list my_urls.txt sina_news.txt --config sina.json
```

3. 查看结果文件 `sina_news.txt`，其中将包含三个新闻页面的提取内容。

### 示例2：使用HTML标签和相对URL
1. 创建URL列表文件 `mixed_urls.txt`：
```
# 直接URL
https://www.example.com/home

# HTML标签
<a href="/about">关于我们</a>
<a href="contact.html">联系我们</a>

# 相对URL
/news
/products/item1
```

2. 创建配置文件 `site_config.json`：
```json
{
    "timeout": 40000,
    "selector": ".main-content",
    "selector_type": "css",
    "baseurl": "https://www.example.com/"
}
```

3. 运行命令：
```bash
python netreptile.py --list mixed_urls.txt site_content.txt --config site_config.json
```

4. 程序将自动处理：
   - `https://www.example.com/home`（保持不变）
   - `/about` → `https://www.example.com/about`
   - `contact.html` → `https://www.example.com/contact.html`
   - `/news` → `https://www.example.com/news`
   - `/products/item1` → `https://www.example.com/products/item1`
